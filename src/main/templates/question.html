<div ng-switch="isGroup()" ng-controller="additionalQuestionController">
    <div ng-switch-when="true" class="question-group">
        <div ng-if="level == 0" class="application-section-heading">
            <span ng-show="questionNode.title.length > 0">{{localization("label.questionGroupWithTitle")}}:</span>
            <span ng-show="questionNode.title.length == 0">{{localization("label.questionGroupWithoutTitle")}}:</span>
            {{ questionNode.title }}
        </div>
        <label ng-if="level > 0" class="question-group-title">{{ questionNode.title }}:</label>

        <div ng-class="{ 'question-group-indent': level > 0, 'question-group-section': level == 0 }" ng-repeat="subItem in questionNode.questionNodes">
            <question question-node="subItem" application="application" level="level+1">
            </question>
        </div>
    </div>

    <div ng-switch-when="false" class="question">
        <label class="title">{{questionNode.question.title}}</label>
        <span class="validation-message error">{{ questionNode.errors.join(', ') }}</span>
        <i class="icon-info-circled verboseHelp" ng-if="questionNode.question.verboseHelp" title="{{questionNode.question.verboseHelp}}"></i>
        <div class="instruction" ng-bind-html="questionNode.question.help"></div>

        <span class="answer" ng-switch="questionNode.question.questionType">
            <input type="text" ng-switch-when="Text"
                   ng-model="questionNode.answer"
                   maxlength="{{questionNode.question.maxlength}}"/>
            <textarea ng-switch-when="TextArea"
                      ng-model="questionNode.answer"
                      maxlength="{{questionNode.question.maxlength}}"
                      rows="{{questionNode.question.rows}}"
                      cols="{{questionNode.question.cols}}"
                    />
            <select ng-switch-when="Dropdown"
                    ng-model="questionNode.answer"
                    ng-options="option.value as option.title for option in questionNode.question.options"
                    ng-change="questionAnswered()">
            </select>

            <div ng-switch-when="Radio">
                <label class="radio-button-item" ng-repeat="option in questionNode.question.options">
                    <input name="{{questionNode.question.id.questionId}}" type="radio"
                           ng-model="questionNode.answer"
                           ng-change="questionAnswered()"
                           value={{option.value}} /> {{option.title }}
                </label>
            </div>

            <div ng-switch-when="Checkbox">
                <label class="radio-button-item" ng-repeat="option in questionNode.question.options">
                    <input type="checkbox" ng-model="questionNode.answer[option.value]">
                    {{option.title }}
                </label>
            </div>
        </span>
    </div>
</div>
